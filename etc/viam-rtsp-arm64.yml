# appimage-builder recipe see https://appimage-builder.readthedocs.io for details
version: 1
script:
- rm -rf AppDir || true
- mkdir -p AppDir/usr/bin
- cp ../bin/viamrtsp-linux-arm64 AppDir/usr/bin/viamrtsp-linux-arm64
- mkdir -p AppDir/usr/share/icons/viam/256x256/apps/
- cp ./viam-server.png AppDir/usr/share/icons/viam/256x256/apps/viam-server.png
- chmod 755 AppDir/usr/bin/viamrtsp-linux-arm64

AppDir:
  path: ./AppDir
  app_info:
    id: com.viam.rtsp-arm64
    name: rtsp-module
    icon: viam-server
    version: 0.0.1
    exec: usr/bin/viamrtsp-linux-arm64
    exec_args: $@
  # apt:
  #   arch: arm64
  #   sources:
  #   - sourceline: deb http://deb.debian.org/debian bullseye main
  #   - sourceline: deb http://deb.debian.org/debian-security bullseye-security main
  #   - sourceline: deb http://deb.debian.org/debian bullseye-updates main
  #   include:
  #   - libswscale-dev
  #   - libavcodec-dev
  files:
    include:
    - /usr/lib/aarch64-linux-gnu/libswscale*
    - /usr/lib/aarch64-linux-gnu/libavcodec*
AppImage:
  arch: aarch64